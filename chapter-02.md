# Розділ 2. Основи робоити web-сайтів

## 2.1. Протокол HTTP

### Загальні відомості про протокол HTTP

Протокол HTTP призначений для передачі вмісту в Інтернеті. HTTP — це простий протокол, який використовує надійні служби протоколу TCP для передачі вмісту. Завдяки цьому HTTP вважається дуже надійним протоколом обміну вмістом. Також HTTP є одним із найчастіше використовуваних протоколів додатків.

HTTPS – це безпечна версія протоколу HTTP, яка реалізує протокол HTTP за допомогою протоколу TLS для захисту базового під'єднання TCP. За винятком додаткової конфігурації, необхідної для налаштування TLS, використання HTTPS по суті не відрізняється від протоколу HTTP.

У протоколі HTTP є простий механізм запиту вмісту сервера. Доступний стандартний набір команд HTTP, які відправляються клієнтом після успішного встановлення підключення за стандартним TCP-портом 80 (або портом 443 для HTTPS чи іншім портом в деяких окремих випадках). 

Для ідентифікації ресурсів HTTP використовує глобальні URI. На відміну від багатьох інших протоколів, HTTP не зберігає свого стану. Це означає відсутність збереження проміжного стану між парами «запит-відповідь».

### Структура HTTP-запиту

Кожен запит/відповідь складається з трьох частин:

1. стартовий рядок;
2. заголовки;
3. тіло повідомлення, що містить дані запиту, запитаний ресурс або опис проблеми, якщо запит не виконано.

Абстрактно приклад запиту можна подати у наступному вигляді:
```
‹Метод› ‹URI› HTTP/‹Версія›  
```
Запит може буде виконаний одним з наступних методів:

- **OPTIONS** Повертає методи HTTP, які підтримуються сервером.
- **GET** Запитує вміст вказаного ресурсу. Запитаний ресурс може приймати параметри, вони передаються в рядку URI.
- **HEAD** Аналогічний методу **GET**, за винятком того, що у відповіді сервера відсутнє тіло. Це корисно для витягання метаінформації, заданої в заголовках відповіді, без пересилання всього вмісту.
- **POST** Передає дані користувача заданому ресурсу. При цьому передані дані включаються в Тіло запиту (Request body). На відміну від методу GET, метод POST не вважається ідемпотентним, тобто багаторазове повторення одних і тих же запитів POST може повертати різні результати.
- **PUT** Завантажує вказаний ресурс на сервер.
- **PATCH** Завантажує певну частину ресурсу на сервер.
- **DELETE** Видаляє вказаний ресурс.
- **TRACE** Повертає отриманий запит так, що клієнт може побачити, що проміжні сервери додають або змінюють в запиті.
- **CONNECT** Для використання разом з проксі-серверами, які можуть динамічно перемикатися в тунельний режим SSL.

Приклад реального запиту HTTP виглядає наступним чином:
```
GET /dir/page.php HTTP/1.1
Host: mysite.pp.ua
User-Agent: firefox/5.0 (Linux; Debian 5.0.8; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7
Connection: close
```

### Структура HTTP-відповіді

Абстрактно приклад відповіді сервера можна подати у наступному вигляді:
```
HTTP/‹Версія› ‹Код статусу› ‹Опис статусу›
```
Одним із найважливіших параметрів, що повертає сервер у заголовку відповіді є код відповіді. За даним кодом браузер або інша програма, що використовує протокол HTTP, розуміє чи корректно було виконано запит.

Коди відповідей діляться на 5 груп:

1. Інформаційні 100 – 199
2. Успішні 200 - 299
3. Перенаправлення 300 - 399
4. Клієнтські помилки 400 – 499
5. Серверні помилки 500 - 599

Повний перелік кодів відповідей надано у Додатку А.

Найбільш поширені коди відповідей:

- 200 OK — запит виконано успішно.
- 301 Moved Permanently — ресурс переміщено.
- 403 Forbidden — доступ до запитаного ресурсу заборонений.
- 404 Not Found — ресурс не знайдений.
- 500 Internal Server Error — внутрішня проблема роботи web-серверу.
- 503 Service Unavailable — сервіс недоступний.

Приклад реальної HTTP-відповіді 
```
HTTP/1.1 200 OK
Server: Apache
Content-Language: uk
Content-Type: text/html; charset=utf-8
Content-Length: 1234
(пустий рядок)
(далі йде текст html-сторінки)
```